@model Model.Model.DetailModel

@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/_Layout.cshtml";
}

<!--Header-->
<nav class="navbar navbar-expand-md bg-primary navbar-dark  sticky-top">
    <!-- Brand -->
    @Html.ActionLink("Website du lịch", "Index", "Home", null, new { @class = "navbar-brand" })

    <!-- Toggler/collapsibe Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navbar links -->
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="~/Search/Search?searchName=Internal">Tour trong nước</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="~/Search/Search?searchName=External">Tour ngoài nước</a>
            </li>
            @{
                if (Session["CURRENT_USER"] == null)
                {
                    <li class="nav-item">
                        @Html.ActionLink("Đăng nhập", "Login", "Home", null, new { @class = "nav-link" })
                    </li>
                    <li class="nav-item">
                        @Html.ActionLink("Đăng ký", "Register", "Home", null, new { @class = "nav-link" })
                    </li>
                }
                else
                {
                    <li>
                        @Html.ActionLink("Đăng xuất", "Logout", "Home", null, new { @class = "nav-link" })
                    </li>
                }
            }
        </ul>
    </div>
</nav>
<!--Carousel Wrapper-->
<div id="carousel-thumb" class="carousel slide carousel-fade carousel-thumbnails" data-ride="carousel">
    <!--Slides-->
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active">
            @{
                var pictureOne = Convert.ToBase64String(Model.image.PictureOne);
                var pictureTwo = Convert.ToBase64String(Model.image.PictureTwo);
                var pictureThree = Convert.ToBase64String(Model.image.PictureThree);

                var imgsrcOne = string.Format("data:image/gif;base64,{0}", pictureOne);
                var imgsrcTwo = string.Format("data:image/gif;base64,{0}", pictureTwo);
                var imgsrcThree = string.Format("data:image/gif;base64,{0}", pictureThree);
            }
            <img class="d-block w-100" src=@imgsrcOne alt="First slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src=@imgsrcTwo alt="Second slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src=@imgsrcThree alt="Third slide">
        </div>
    </div>
    <!--/.Slides-->
    <!--Controls-->
    <a class="carousel-control-prev" href="#carousel-thumb" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel-thumb" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    <!--/.Controls-->
    <ol class="carousel-indicators custom-carousel-indicator">
        <li data-target="#carousel-thumb" data-slide-to="0" class="active"> <img class="d-block w-100" src=@imgsrcOne></li>
        <li data-target="#carousel-thumb" data-slide-to="1"><img class="d-block w-100 img-fluid" src=@imgsrcTwo></li>
        <li data-target="#carousel-thumb" data-slide-to="2"><img class="d-block w-100 img-fluid" src=@imgsrcThree></li>
    </ol>
</div>
<!--/.Carousel Wrapper-->
<!--Header-->
<!--main-->
<div class="container">
    <!--row 1-->
    <div class="row white-border-row">
        <div class="col-md-8">
            <!--Set-tour card-->
            <div class="col-md-12">
                <div class="row set-tour-card p-2">
                    <div class="col-md-6 d-flex justify-content-center" style="align-items: center;">
                        <h6 class="set-tour-card-title flex-fill p-1">@Model.tour.MoTaTour</h6>
                    </div>

                    <div class="col-md-3 d-flex justify-content-center">
                        <div class="price-box-mini flex-fill">
                            <div class="price-box-mini-item">
                                <h6 class="text-danger text-center">@Model.tour.GiaTien đ</h6>
                                <span class="text-danger text-center"><small>Trẻ em: @Model.tour.GiaTienTreEm đ</small> </span>
                            </div>
                            <div class="price-box-mini-item text-center">
                                <h6>Số chổ còn nhận: <span class="text-danger">@Model.tour.SoChoConLai</span></h6>
                            </div>
                            <div class="price-box-mini-item text-center">
                                <h6>Giảm ngay @Model.tour.GiamGia % khi đặt tour ngay bây giờ!</h6>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-3 d-flex justify-content-center align-self-center">
                        @{
                            if (Model.tour.TinhTrang == true)
                            {
                                @Html.ActionLink("Đặt Tour", "Index", "Business", new { tourID = Model.tour.MaTour }, new { @class = "btn btn-orange font-weight-bold text-white round-and-long" })
                            }
                            else
                            {
                                <span class="text-danger">Tour đã hết chỗ!</span>
                                @Html.ActionLink("Đặt Tour", "Index", "Business", new { tourID = Model.tour.MaTour }, new { @class = "btn btn-orange font-weight-bold text-white round-and-long", @disabled = "disabled" })
                            }
                        }

                    </div>
                </div>
            </div>
            <!--Tour summary-->
            <div class="col-md-12 mt-5">
                <div class="row">
                    <div class="col-md-8">
                        <table class="table table-borderless table-no-border">
                            <tbody>
                                <tr>
                                    <td>Mã tour:</td>
                                    <td colspan="2">@Model.tour.MaTour</td>
                                </tr>
                                <tr>
                                    <td>Ngày khởi hành:</td>
                                    <td>07/11/2018</td>
                                    <td><a class="no-underline text-orange" href="#"><span><i class="fas fa-calendar-alt"></i></span> Ngày khác</a></td>
                                </tr>
                                <tr>
                                    <td>Nơi khởi hành:</td>
                                    <td>@Model.tour.NoiKhoiHanh</td>
                                    <td>Thời gian: <span>@Model.tour.SoNgay ngày</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="col-md-4  d-flex justify-content-center align-items-baseline">
                        <button type="button" class="btn btn-blue font-weight-bold text-white round-and-long" name="button">Hotline</button>
                    </div>
                </div>
            </div>
            <!--Tour details-->
            <div class="col-md-12 mt-5">
                <h6 class="vertical-line text-orange text-uppercase font-weight-bold">Chi tiết tour</h6>
                <!--Plane-->
                <div class="mt-3 ml-3">
                    <h6 class="small font-weight-bold text-uppercase"><span><i class="fas fa-plane"></i></span> Thông tin thời gian</h6>
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td>Ngày đi: <span>@Model.tour.NgayKhoiHanh.ToShortDateString()</span></td>
                                <td>Chuyến bay: <span>@Model.chiTietTour.MaPhuongTien</span></td>
                            </tr>
                            <tr>
                                <td>Ngày về: <span>@Model.tour.NgayTroVe.ToShortDateString()</span></td>
                                <td>Chuyến bay: <span>@Model.chiTietTour.MaPhuongTien</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--Hotel-->
                <div class="mt-3 ml-3">
                    <h6 class="small font-weight-bold text-uppercase"><i class="fas fa-building"></i> Thông tin khách sạn</h6>
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td>Đang cập nhật</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--Guider-->
                <div class="mt-3 ml-3">
                    <h6 class="small font-weight-bold text-uppercase"><i class="fas fa-user"></i> Thông tin hướng dẫn viên</h6>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Họ tên</th>
                                <th>Điện thoại</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>@Model.hdv.HoTenHDV</td>
                                <td>@Model.hdv.SoDienThoaiHDV</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--Destination-->
                <div class="mt-3 ml-3">
                    <h6 class="small font-weight-bold text-uppercase"><i class="fas fa-dot-circle"></i> Thông tin tập trung</h6>
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <td>Ngày tập trung:</td>
                                <td>@Model.chiTietTour.NgayGioTapTrung</td>
                            </tr>
                            <tr>
                                <td>Nơi tập trung:</td>
                                <td>@Model.chiTietTour.NoiTapTrung</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!--Tour warning-->
            <div class="col-md-12 mt-5">
                <h6 class="vertical-line text-orange text-uppercase font-weight-bold">Lưu ý</h6>
                <ul class="small">
                    @{
                        if (Model.chiTietTour.CoBaoHiem == true)
                        {
                            <li>Tour bao gồm bảo hiểm tai nạn.</li>
                        }
                        else
                        {
                            <li>Tour không bao gồm bảo hiểm tai nạn.</li>
                        }
                        string[] stringSplit = Model.chiTietTour.QuaTang.Split('|');
                        if (stringSplit[0] != "false")
                        {
                            <li>Nước suối</li>}
                        if (stringSplit[1] != "false")
                        {
                            <li>Nón</li>}
                        if (stringSplit[2] != "false")
                        {
                            <li>Áo thun</li>}
                        if (stringSplit[3] != "false")
                        {
                            <li>Dù</li>}
                    }
                </ul>
            </div>

            <div class="col-md-12 mt-5">
                <h6 class="vertical-line text-orange text-uppercase font-weight-bold">Lịch trình</h6>
                <p>Đang cập nhật</p>

            </div>
        </div>
        <!--Similar tour-->
        <div class="col-md-4">
            <h4 class="font-weight-bold text-uppercase text-monospace mb-3"> Các tour tương tự</h4>

            <!--Card 1-->
            <div class="card mb-2" style="width: 18rem;">
                @{ 
                    var relativeTourImage1 = Convert.ToBase64String(Model.relativeTourImage1);
                    var relativeTourImageSrc1 = string.Format("data:image/gif;base64,{0}", relativeTourImage1);
                }
                <img class="card-img-top" src=@relativeTourImageSrc1 alt="Da Lat">
                <div class="card-body">
                    <p class="card-text">@Html.ActionLink(Model.relativeTour1.MoTaTour,"Detail","Tour", new { @tourID = Model.relativeTour1.MaTour }, new { @class="no-underline"})</p>
                </div>
            </div>
            <!--Card 2-->
            <div class="card mb-2" style="width: 18rem;">
                @{
                    var relativeTourImage2 = Convert.ToBase64String(Model.relativeTourImage2);
                    var relativeTourImageSrc2 = string.Format("data:image/gif;base64,{0}", relativeTourImage2);
                }
                <img class="card-img-top" src=@relativeTourImageSrc2 alt="Da Lat">                <div class="card-body">
                    <p class="card-text">@Html.ActionLink(Model.relativeTour2.MoTaTour, "Detail", "Tour", new { @tourID = Model.relativeTour2.MaTour }, new { @class = "no-underline" })</p>
                </div>
            </div>
            <!--Card 3-->
            <div class="card mb-2" style="width: 18rem;">
                @{
                    var relativeTourImage3 = Convert.ToBase64String(Model.relativeTourImage3);
                    var relativeTourImageSrc3 = string.Format("data:image/gif;base64,{0}", relativeTourImage3);
                }
                <img class="card-img-top" src=@relativeTourImageSrc3 alt="Da Lat">                <div class="card-body">
    <p class="card-text">@Html.ActionLink(Model.relativeTour3.MoTaTour, "Detail", "Tour", new { @tourID = Model.relativeTour3.MaTour }, new { @class = "no-underline" })</p>
</div>
            </div>
        </div>
    </div>
    <!--row 2-->
</div>
<!-- Footer -->
<footer class="page-footer font-small bg-primary pt-4">
    <!-- Footer Links -->
    <div class="container-fluid text-center text-md-left text-white">
        <!-- Grid row -->
        <div class="row">
            <!-- Grid column -->
            <div class="col-md-6 mt-md-0 mt-3">
                <!-- Content -->
                <h5 class="text-uppercase">Website Du Lịch</h5>
                <p>Đem lại trải nghiệm đặt tour tuyệt vời nhất</p>
            </div>
            <!-- Grid column -->
            <hr class="clearfix w-100 d-md-none pb-3">
            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-3">
                <!-- Links -->
                <h5 class="text-uppercase">Liên hệ</h5>
                <p class="text-white">
                    Khu phố 6, phường Linh Trung, quận Thủ Đức, Tp. Hồ Chí Minh <br />
                    <strong>Điện thoại:</strong> (84 028) 80 55 303 <br />
                    <strong>Email: </strong> info@websitedulich.com <br />
                    <strong>Hotline: </strong> 1900 6969 (8h00-22h00 mỗi ngày)
                </p>
            </div>
            <!-- Grid column -->
            <!-- Grid column -->
            <div class="col-md-3 mb-md-0 mb-3">
                <!-- Links -->
                <ul class="text-white footer-list">
                    <li>
                        <a href="#!">Chính sách riêng tư</a>
                    </li>
                    <li>
                        <a href="#!">Chính sách thanh toán</a>
                    </li>
                    <li>
                        <a href="#!">Thỏa thuận sử dụng</a>
                    </li>
                    <li>
                        <a href="#!">Chính sách riêng tư</a>
                    </li>
                </ul>
            </div>
            <!-- Grid column -->
        </div>
        <!-- Grid row -->
    </div>
    <!-- Footer Links -->
    <!-- Copyright -->
    <div class="text-center py-3" style="background-color:#0A5083">
        © 2018 Product by:
        <a href="#">Đồ án môn học Công nghệ Web và Ứng dụng sẽ được 10 điểm</a>
    </div>
    <!-- Copyright -->
</footer>
<!-- Footer -->